(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{767:function(t,s,n){"use strict";n.r(s);var a=n(1),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"nullptr与null"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nullptr与null"}},[t._v("#")]),t._v(" nullptr与NULL")]),t._v(" "),n("p",[t._v("Created: March 19, 2024 1:04 PM")]),t._v(" "),n("p",[t._v("在C++中，"),n("strong",[n("code",[t._v("nullptr")]),n("strong",[t._v("是C++11引入的一个新的字面量，它代表空指针。它的类型是")]),n("code",[t._v("std::nullptr_t")])]),t._v("，可以转换成任何原生指针类型。使用**"),n("code",[t._v("nullptr")]),n("strong",[t._v("代替之前的")]),n("code",[t._v("NULL")]),n("strong",[t._v("（通常被定义为")]),n("code",[t._v("0")]),n("strong",[t._v("或")]),n("code",[t._v("((void*)0)")]),n("strong",[t._v("）的主要目的是消除一些由于")]),n("code",[t._v("NULL")]),t._v("**本质上是整数导致的歧义和潜在的错误。")]),t._v(" "),n("h3",{attrs:{id:"歧义的解释"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#歧义的解释"}},[t._v("#")]),t._v(" "),n("strong",[t._v("歧义的解释")])]),t._v(" "),n("p",[t._v("在引入**"),n("code",[t._v("nullptr")]),n("strong",[t._v("之前，")]),n("code",[t._v("NULL")]),n("strong",[t._v("被用来表示空指针。然而，因为")]),n("code",[t._v("NULL")]),n("strong",[t._v("通常被定义为")]),n("code",[t._v("0")]),t._v("**，所以它实际上是一个整数。这会导致在重载函数时出现歧义，特别是当一个函数接受整型参数，而另一个接受指针类型参数时。编译器可能无法确定调用哪个函数。")]),t._v(" "),n("div",{staticClass:"language-cpp line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[t._v("cppCopy code\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" ptr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在调用时出现歧义")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用者意图可能是调用func(int* ptr)，但NULL实际上可以是整数0")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"nullptr解决了歧义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nullptr解决了歧义"}},[t._v("#")]),t._v(" "),n("strong",[n("code",[t._v("nullptr")]),t._v("解决了歧义")])]),t._v(" "),n("p",[n("strong",[n("code",[t._v("nullptr")]),n("strong",[t._v("的引入正是为了解决这种歧义。由于")]),n("code",[t._v("nullptr")]),n("strong",[t._v("有自己的类型")]),n("code",[t._v("std::nullptr_t")])]),t._v("，编译器可以清楚地区分重载函数，确保调用正确。")]),t._v(" "),n("div",{staticClass:"language-cpp line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[t._v("cppCopy code\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" ptr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用nullptr，没有歧义")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nullptr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 明确地调用 func(int* ptr)")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"nullptr与null的比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nullptr与null的比较"}},[t._v("#")]),t._v(" "),n("strong",[n("code",[t._v("nullptr")]),t._v("与"),n("code",[t._v("NULL")]),t._v("的比较")])]),t._v(" "),n("ul",[n("li",[t._v("**"),n("code",[t._v("nullptr")]),n("strong",[t._v("提供了类型安全，避免了")]),n("code",[t._v("NULL")]),t._v("**可能引起的歧义和错误。")]),t._v(" "),n("li",[t._v("**"),n("code",[t._v("nullptr")]),t._v("**可以被隐式转换为任何指针类型，但不可以转换为整数类型，这进一步防止了误用。")]),t._v(" "),n("li",[t._v("对于现代C++代码（C++11及之后版本），推荐使用**"),n("code",[t._v("nullptr")]),n("strong",[t._v("代替")]),n("code",[t._v("NULL")]),t._v("**。")])]),t._v(" "),n("p",[t._v("综上所述，"),n("strong",[n("code",[t._v("nullptr")]),n("strong",[t._v("不等同于之前的")]),n("code",[t._v("NULL")])]),t._v("，而是一种更安全、更明确的空指针表示方式。")])])}),[],!1,null,null,null);s.default=r.exports}}]);